<% title "Settings" %>
<% lim "900px" %>
<section style="width:100%;" class="page properties">
</section>
<section style="width:100%;" class="page properties tab-set">
	<ul class="tab-set tabs">
		<li data-target="profile" class="button selected">Profile</li>
		<li data-target="account" class="button">Account</li>
		<li data-target="filter" class="button">Content & Filter</li>
		<li data-target="commenting" class="button">Notifications</li>
		<li data-target="local" class="button">Local</li>
	</ul>
	<div data-tab="profile" class="tab selected">
		<h1>Profile Information</h1>
		<%= render partial: "/artist/edit", locals: { user: current_user, url: "/ajax/update/artist" } %>
	</div>
	<div data-tab="account" class="tab">
		<h1>Account Settings</h1>
		<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
		<%= devise_error_messages! %>
		<table>
			<tr class="section">
				<td colspan="2">
					Basic Information
				</td>
			</tr>
			<tr>
				<td class="label">
					<%= f.label :email %>
				</td>
				<td class="field">
					<%= f.email_field :email, autofocus: true %>
					<% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
					<div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
					<% end %>
				</td>
			</tr>
			<tr>
				<td class="label">
				<%= f.label :password %>
				</td>
				<td class="field">
				<%= f.password_field :password, autocomplete: "off" %>
				</td>
			</tr>
			<tr>		
				<td class="label">
				<%= f.label :password_confirmation %>
				</td>
				<td class="field">
				<%= f.password_field :password_confirmation, autocomplete: "off" %>
				</td>
			</tr>
			<tr class="section">
				<td colspan="2">
					Save
				</td>
			</tr>
			<tr>
				<td class="label">
				<%= f.label :current_password %>
				</td>
				<td class="field">
				<%= f.password_field :current_password, autocomplete: "off" %>
				</td>
			</tr>
			<tr class="actions">
				<td class="label">
				</td>
				<td class="field">
					<%= f.submit "Save Changes", class: "green" %>
				</td>
			</tr>
		</table>
	<% end %>
		<h1>Delete Account</h1>
		<table>
			<tr>
				<td class="label">
					Careful! This can not be undone.
				</td>
				<td class="field">
					<button class="confirm-button" data-action="template" data-template="cancel_form" data-title="Here be dragons" data-icon="warning" id="close_account" class="red">Cancel my account</button>
					<div id="cancel_form" style="display:none;">
						<div class="message_content">
							<p>
								Your account will be permanently deleted. This includes any starred videos.
								Though you can always create a new account later.
							</p>
						</div>
						<div class="foot">
							<button class="right cancel" type="button">No thanks</button>
							<%= button_to "Yes, Cancel my account", registration_path(resource_name), class: "red", method: :delete %>
						</div>
					</div>
				</td>
			</tr>
		</table>
	</div>
	<div data-tab="filter" class="tab">
		<%= render partial: "feed/filter_settings" %>
	</div>
	<div data-tab="commenting" class="tab">
		<h1>Notifications</h1>
		<%= form_for(current_user.prefs_cache, as: 'settings', url: '/users/prefs', html: { method: :put }) do |f| %>
		<table style="table-layout:auto;">
			<tr>
				<td class="label">
					Subscribe On Reply
				</td>
				<td class="field">
					<div>Subscribe to comment sections as soon as you post a reply.</div>
					<label class="button">
						<%= f.check_box :subscribe_on_reply %>
						<i class="fa fa-check"></i> Enable
					</label>
				</td>
			</tr>
			<tr>
				<td class="label">
					Subscribe On Upload
				</td>
				<td class="field">
					<div>You will be subscribed to new comments on any videos you upload.</div>
					<label class="button">
						<%= f.check_box :subscribe_on_upload %>
						<i class="fa fa-check"></i> Enable
					</label>
				</td>
			</tr>
			<tr>
				<td class="label">
					Subscribe On New Thread
				</td>
				<td class="field">
					<div>You will be subscribed to new comments on any threads you create.</div>
					<label class="button">
						<%= f.check_box :subscribe_on_thread %>
						<i class="fa fa-check"></i> Enable
					</label>
				</td>
			</tr>
			<tr class="actions">
				<td class="label">
				</td>
				<td class="field">
					<%= f.submit "Save Changes", class: "green" %>
				</td>
			</tr>
		</table>
		<% end %>
	</div>
	<div data-tab="local" class="tab">
		<h1>Local Settings</h1>
		<table>
			<tr>
				<td class="label">
					Notifications
				</td>
				<td class="field">
					<label class="button">
						<input id="give_me_notifications" name="give_me_notifications" type="checkbox"></input>
						<i class="fa fa-check"></i>
						Enable
					</label>
				</td>
			</tr>
		</table>
	</div>
</section>